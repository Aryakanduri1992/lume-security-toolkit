# Lume Security Toolkit v0.4.0 - Release Notes

## üéâ Release Information

**Version**: 0.4.0  
**Codename**: "Plugin Architecture"  
**Release Date**: February 2026  
**Previous Version**: 0.3.0 (ML-Enhanced)  

---

## üéØ Overview

Version 0.4.0 introduces a modular plugin architecture that transforms Lume from a monolithic tool into a secure, extensible framework while maintaining 100% backward compatibility with v0.3.0.

**Core Principle**: "Minimal, secure, and lean. Not Kubernetes."

---

## ‚ú® What's New

### 1. Plugin Architecture

**Modular Design**:
- 7 security tools refactored into independent plugins
- BasePlugin abstract class for secure plugin interface
- PluginRegistry for plugin management
- Command template locking for security

**Security Enhancements**:
- ‚úÖ No shell=True execution anywhere
- ‚úÖ Command template locking prevents injection
- ‚úÖ Target validation required for all plugins
- ‚úÖ No string concatenation for commands
- ‚úÖ Subprocess execution with shell=False

### 2. Available Plugins

All 7 core tools are now plugins:

1. **nmap** - Network scanning and port discovery
2. **gobuster** - Directory and subdomain enumeration
3. **nikto** - Web vulnerability scanning
4. **sqlmap** - SQL injection testing
5. **hydra** - Password brute-forcing
6. **metasploit** - Exploitation framework
7. **whatweb** - Web technology identification

### 3. New CLI Features

**Plugin Management**:
```bash
# List all available plugins
lume --list-plugins

# Show plugin information
lume --plugin-info nmap
```

**Backward Compatible**:
All v0.3.0 commands work identically:
```bash
lume "scan ports on 192.168.1.1"
lume "find directories on example.com"
lume --explain "test sql injection"
```

### 4. Legacy Adapter

**Transparent Compatibility Layer**:
- Maintains all v0.3.0 behavior
- Translates old commands to new plugin execution
- Users see no difference in functionality
- Zero breaking changes

---

## üîí Security Improvements

### Command Template Locking

**Before (v0.3.0)**:
```python
# Vulnerable to injection
command = f"nmap -sV {target}"
subprocess.run(command, shell=True)  # DANGEROUS
```

**After (v0.4.0)**:
```python
# Secure template-based execution
template = ["nmap", "-sV", "-T4", "{target}"]
command = [arg.replace("{target}", validated_target) for arg in template]
subprocess.run(command, shell=False)  # SAFE
```

### Security Guarantees

1. **No Shell Interpretation**
   - All commands use shell=False
   - No pipe, semicolon, or operator execution
   - No command substitution

2. **Template Locking**
   - Commands built from fixed templates
   - No dynamic flag injection
   - Whitelist-only approach

3. **Target Validation**
   - All targets validated before use
   - Dangerous characters removed
   - Type checking (IP/domain/URL)

4. **Explicit Registration**
   - No dynamic plugin loading
   - No arbitrary code execution
   - Internal plugins only

---

## üìä Technical Details

### Architecture Changes

**v0.3.0 Architecture**:
```
User Input ‚Üí ML Normalizer ‚Üí Rule Engine ‚Üí Shell Command
```

**v0.4.0 Architecture**:
```
User Input ‚Üí ML Normalizer ‚Üí Legacy Adapter ‚Üí Plugin Registry ‚Üí BasePlugin ‚Üí Secure Execution
```

### New Components

1. **BasePlugin** (`lume/core/plugin_base.py`)
   - Abstract base class for all plugins
   - Enforces secure execution
   - ~180 lines

2. **PluginRegistry** (`lume/core/plugin_registry.py`)
   - Simple dictionary-based registry
   - Plugin validation on registration
   - ~180 lines

3. **Validators** (`lume/core/validators.py`)
   - IP, domain, URL validation
   - Command template validation
   - Target sanitization
   - ~180 lines

4. **LegacyAdapter** (`lume/core/legacy_adapter.py`)
   - Backward compatibility layer
   - Translates v0.3.0 to v0.4.0
   - ~180 lines

5. **7 Plugin Files** (`lume/plugins/*.py`)
   - One file per tool
   - ~80 lines each
   - Total: ~560 lines

### Code Metrics

| Component | Lines | Files |
|-----------|-------|-------|
| Core Plugin System | 720 | 4 |
| Plugin Implementations | 560 | 7 |
| Tests | 400 | 4 |
| **Total New Code** | **1,680** | **15** |

---

## üîÑ Migration Guide

### For Users

**No action required!** All v0.3.0 commands work identically.

### For Developers

If you've been using Lume programmatically:

**Old Way (v0.3.0)**:
```python
from lume.core.engine import LumeEngine

engine = LumeEngine()
result = engine.parse_instruction("scan ports on 192.168.1.1")
engine.execute_command(result['command'])
```

**New Way (v0.4.0)**:
```python
from lume.core.legacy_adapter import LegacyAdapter

adapter = LegacyAdapter()
result = adapter.parse_and_execute("scan ports on 192.168.1.1")
```

**Plugin Way (v0.4.0)**:
```python
from lume.core.plugin_registry import PluginRegistry

registry = PluginRegistry()
plugin = registry.get('nmap')
result = plugin.execute('192.168.1.1')
```

---

## üß™ Testing

### Test Coverage

- **Unit Tests**: 400+ lines
- **Test Files**: 4
- **Coverage**: Core plugin system fully tested

### Running Tests

```bash
cd ~/lume-security-toolkit
python3 -m pytest tests/ -v
```

---

## üì¶ Installation

### Fresh Install

```bash
git clone https://github.com/Aryakanduri1992/lume-security-toolkit.git
cd lume-security-toolkit
sudo pip3 install -e . --break-system-packages
```

### Upgrade from v0.3.0

```bash
cd ~/lume-security-toolkit
git pull origin main
sudo pip3 install -e . --break-system-packages --upgrade
```

### Verify Installation

```bash
lume --version
# Should show: Lume Security Toolkit v0.4.0

lume --list-plugins
# Should list 7 plugins
```

---

## üêõ Known Issues

None at release time.

---

## üîÆ What's Next

### v0.5.0 - Workflows (Planned)

**Foundation**: Plugin architecture enables workflows

**Features**:
- BaseWorkflow abstract class
- WorkflowExecutor
- 3 initial workflows:
  - Web pentesting workflow
  - Network pentesting workflow
  - Password audit workflow

**Timeline**: 2-3 weeks after v0.4.0

---

## üí° Examples

### Basic Usage (Unchanged)

```bash
# Port scanning
lume "scan ports on 192.168.1.1"

# Directory enumeration
lume "find directories on example.com"

# SQL injection testing
lume "test sql injection on http://target.com/page?id=1"

# Dry run mode
lume --dry-run "scan network for live hosts"

# Explain mode
lume --explain "brute force ssh on 192.168.1.10"
```

### New Plugin Features

```bash
# List available plugins
lume --list-plugins

# Get plugin information
lume --plugin-info nmap
lume --plugin-info gobuster
lume --plugin-info sqlmap
```

### ML Normalization (Still Works)

```bash
# Enable ML normalization
lume --ml-normalize "please scan the ports on 192.168.1.1"

# With confidence threshold
lume --ml-normalize --ml-confidence 0.8 "check for vulnerabilities"
```

---

## üìù Breaking Changes

**None!** Version 0.4.0 maintains 100% backward compatibility with v0.3.0.

---

## üôè Acknowledgments

**Architecture Review**: Critical security review that shaped v0.4.0
**Core Principle**: "Minimal, secure, lean. Not Kubernetes."
**Security First**: No shell=True, command template locking, validation everywhere

---

## üìû Support

**GitHub**: https://github.com/Aryakanduri1992/lume-security-toolkit  
**Issues**: https://github.com/Aryakanduri1992/lume-security-toolkit/issues  
**Documentation**: See repository docs/ folder  

---

## üìÑ License

MIT License - See LICENSE file for details

---

## ‚úÖ Changelog Summary

### Added
- Plugin architecture with BasePlugin abstract class
- PluginRegistry for plugin management
- 7 security tool plugins (nmap, gobuster, nikto, sqlmap, hydra, metasploit, whatweb)
- Validators module for security validation
- LegacyAdapter for backward compatibility
- --list-plugins CLI flag
- --plugin-info CLI flag
- Command template locking for security
- Comprehensive test suite

### Changed
- Version updated to 0.4.0
- CLI now uses plugin system internally
- All commands execute via plugins (transparent to users)
- Security model enhanced (no shell=True anywhere)

### Deprecated
- None

### Removed
- None

### Fixed
- None (no bugs from v0.3.0)

### Security
- Eliminated shell=True execution
- Implemented command template locking
- Added target validation layer
- Prevented command injection attacks

---

**Version**: 0.4.0  
**Status**: Released  
**Date**: February 2026  

**"Think in English. Hack in Kali. Build it Lean."** üî¶
